<!DOCTYPE html>

<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
    <script src="moment-with-locales.js"></script>
    <link rel="stylesheet" href="twittlerStyle.css">
    
  </head>
  <body>
    <h1>Twittler: "Even better than Twitter"
    </h1>
    <p> <script>
    $(document).ready(function(){
      var $p = $('p');
      index = streams.home.length - 1;
      while(index >= 0){
        var tweet = streams.home[index];
        var $tweet = $('<div class = tweetLine></div>');
        $tweet.text('@' + tweet.user + ': ' + tweet.message + ' ' + moment(tweet.created_at).fromNow());
        $tweet.attr('userName', tweet.user);
        $tweet.appendTo($p);
        index -= 1;
      }    
      $(".tweetLine").on("click", oneName);
    });
        
    </script> </p>

    <button id=#refresh> Check for new Tweets </button>
    <script>
    document.getElementById("#refresh").addEventListener("click", function() {
      var $p = $('p');
      $p.html('');
      
      index = streams.home.length - 1;
      while(index >= 0){
        var tweet = streams.home[index];
        var $tweet = $('<div class = tweetLine></div>');
        $tweet.text('@' + tweet.user + ': ' + tweet.message + ' ' + moment(tweet.created_at).fromNow());
        $tweet.attr('userName', tweet.user);
        $tweet.appendTo($p);
        index -= 1;
      }
      $(".tweetLine").on("click", oneName);
    });
    
    var oneName = function (){
      var userName = $(this).attr('username');
      var $p = $('p');
      $p.html('');
      index = streams.home.length - 1;
      while(index >= 0){
        var tweet = streams.home[index];
        if(tweet.user === userName){
          var $tweet = $('<div class = tweetLine></div>');
          $tweet.text('@' + tweet.user + ': ' + tweet.message + ' ' + moment(tweet.created_at).fromNow());
          $tweet.attr('userName', tweet.user);
          $tweet.appendTo($p);  
        }
        index -= 1;
      }
      
    }
    </script>
    
  </body>
</html>
